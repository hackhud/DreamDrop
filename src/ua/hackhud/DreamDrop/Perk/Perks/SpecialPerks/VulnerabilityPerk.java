package ua.hackhud.DreamDrop.Perk.Perks.SpecialPerks;

import ua.hackhud.DreamDrop.Perk.Perk;
import ua.hackhud.DreamDrop.Entity.RPGItemStack;
import ua.hackhud.DreamDrop.Enum.AttributeType;

public class VulnerabilityPerk extends SpecialBasedPerk implements Perk {
    private static final String ICON_PATH = "{VulnerabilityDivine}.png";

    public VulnerabilityPerk(int baseWeight, String perkId) {
        super(baseWeight, perkId);
    }

    @Override
    public boolean canApplyTo(RPGItemStack item) {
        return item.hasAttribute(AttributeType.PVE_ARMOR)
                && (item.hasAttribute(AttributeType.PVE_DAMAGE)
                || item.hasAttribute(AttributeType.PVE_DAMAGE_PERCENT)
                || item.hasAttribute(AttributeType.PVE_CRIT_DAMAGE)
                || item.hasAttribute(AttributeType.PVE_CRIT_DAMAGE_PERCENT));
    }

    @Override
    public void applyTo(RPGItemStack item) {
        item.set(AttributeType.PVE_ARMOR, 0);
        item.multiplyPercent(AttributeType.PVE_DAMAGE, 50);
        item.multiplyPercent(AttributeType.PVE_DAMAGE_PERCENT, 50);
        item.multiplyPercent(AttributeType.PVE_CRIT_DAMAGE, 50);
        item.multiplyPercent(AttributeType.PVE_CRIT_DAMAGE_PERCENT, 50);
        item.addIcon(ICON_PATH);
    }
}